"use strict";(self.webpackChunkanotate_shell=self.webpackChunkanotate_shell||[]).push([[7196],{7196:(e,s,a)=>{a.r(s),a.d(s,{default:()=>m});var t=a(4146),i=a(4999),l=a(2712),r=a(2540);const n=({src:e,alt:s="Image",title:a,similarity:n,onView:c,onEdit:d,onDelete:o})=>{const[m,h]=(0,t.useState)(!1);return(0,r.jsx)("div",{className:"image-card group bg-white rounded-lg overflow-hidden",onMouseEnter:()=>h(!0),onMouseLeave:()=>h(!1),children:(0,r.jsxs)("div",{className:"relative aspect-square overflow-hidden",children:[(0,r.jsx)("img",{src:e,alt:s,className:"object-cover w-full h-full transition-transform duration-300 group-hover:scale-105"}),(0,r.jsxs)("div",{className:"absolute inset-0 bg-gradient-to-t from-black/60 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300 p-3 flex flex-col justify-end",children:[void 0!==n&&(0,r.jsxs)("div",{className:"bg-black/60 text-white text-xs font-medium px-2 py-1 rounded-full w-fit mb-2",children:[Math.round(100*n),"% match"]}),a&&(0,r.jsx)("h3",{className:"text-white font-medium truncate text-sm",children:a}),(0,r.jsxs)("div",{className:"flex gap-1 mt-2",children:[c&&(0,r.jsx)(l.Button,{size:"icon",variant:"secondary",className:"h-7 w-7",onClick:e=>{e.stopPropagation(),c()},children:(0,r.jsx)(i.Maximize2,{className:"h-3.5 w-3.5"})}),d&&(0,r.jsx)(l.Button,{size:"icon",variant:"secondary",className:"h-7 w-7",onClick:e=>{e.stopPropagation(),d()},children:(0,r.jsx)(i.Edit,{className:"h-3.5 w-3.5"})}),o&&(0,r.jsx)(l.Button,{size:"icon",variant:"destructive",className:"h-7 w-7",onClick:e=>{e.stopPropagation(),o()},children:(0,r.jsx)(i.Trash2,{className:"h-3.5 w-3.5"})})]})]})]})})},c=[{id:1,src:"https://images.unsplash.com/photo-1579353977828-2a4eab540b9a",title:"Sunset at the beach",similarity:.92},{id:2,src:"https://images.unsplash.com/photo-1579762593131-b8945254345c",title:"Mountain landscape",similarity:.87},{id:3,src:"https://images.unsplash.com/photo-1584559582128-b8be739912e0",title:"Urban cityscape",similarity:.76},{id:4,src:"https://images.unsplash.com/photo-1564979045531-fa386a275b27",title:"Forest pathway",similarity:.68},{id:5,src:"https://images.unsplash.com/photo-1596662951482-0c4ba74a6df6",title:"Ocean view",similarity:.61},{id:6,src:"https://images.unsplash.com/photo-1611816055460-618287c870bd",title:"Desert landscape",similarity:.57}],d=[{value:"resnet50",label:"ResNet-50",category:"Image Embedding"},{value:"efficientnet",label:"EfficientNet-B0",category:"Image Embedding"},{value:"vit",label:"Vision Transformer",category:"Image Embedding"}],o=()=>{const[e,s]=(0,t.useState)("resnet50"),[a,o]=(0,t.useState)([.5]),[m,h]=(0,t.useState)(null),[u,x]=(0,t.useState)(!1),[g,p]=(0,t.useState)([]),j=g.filter((e=>e.similarity>=a[0]));return(0,r.jsxs)("div",{className:"w-full",children:[(0,r.jsxs)(l.Card,{className:"mb-6",children:[(0,r.jsxs)(l.CardHeader,{children:[(0,r.jsx)(l.CardTitle,{className:"text-xl",children:"Image Similarity Search"}),(0,r.jsx)(l.CardDescription,{children:"Find visually similar images using image embedding models"})]}),(0,r.jsx)(l.CardContent,{className:"space-y-4",children:(0,r.jsxs)("div",{className:"flex flex-col lg:flex-row gap-6",children:[(0,r.jsx)("div",{className:"flex-1 border-2 border-dashed rounded-lg "+(m?"":"border-muted-foreground/25"),children:(0,r.jsx)("label",{htmlFor:"image-upload",className:"flex flex-col items-center justify-center h-60 md:h-80 cursor-pointer "+(m?"p-4":"p-6"),children:m?(0,r.jsxs)("div",{className:"relative w-full h-full",children:[(0,r.jsx)("img",{src:m,alt:"Uploaded image",className:"w-full h-full object-contain"}),(0,r.jsx)(l.Button,{variant:"outline",className:"absolute bottom-2 right-2",onClick:e=>{e.preventDefault(),h(null),p([])},children:"Replace"})]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"flex flex-col items-center justify-center gap-3 text-center",children:[(0,r.jsx)("div",{className:"rounded-full bg-muted p-3",children:(0,r.jsx)(i.Upload,{className:"h-6 w-6 text-muted-foreground"})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-base font-medium",children:"Drag and drop an image, or click to browse"}),(0,r.jsx)("p",{className:"text-sm text-muted-foreground mt-1",children:"JPG, PNG or WEBP up to 10MB"})]})]}),(0,r.jsx)("input",{id:"image-upload",type:"file",accept:"image/*",className:"sr-only",onChange:e=>{var s;const a=null==(s=e.target.files)?void 0:s[0];if(a){const e=new FileReader;e.onload=e=>{var s;const a=null==(s=e.target)?void 0:s.result;h(a),x(!0),setTimeout((()=>{p(c),x(!1)}),1e3)},e.readAsDataURL(a)}}})]})})}),(0,r.jsxs)("div",{className:"space-y-4 lg:w-1/3",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-sm font-medium mb-2",children:"Select embedding model"}),(0,r.jsx)(l.ModelSelector,{options:d,value:e,onValueChange:s})]}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,r.jsx)("h3",{className:"text-sm font-medium",children:"Similarity threshold"}),(0,r.jsxs)(l.Badge,{variant:"secondary",children:[Math.round(100*a[0]),"%"]})]}),(0,r.jsx)(l.Slider,{value:a,onValueChange:o,min:0,max:1,step:.01})]}),(0,r.jsx)("div",{className:"pt-4",children:(0,r.jsx)(l.Button,{variant:"default",className:"w-full",disabled:!m||u,onClick:()=>{x(!0),setTimeout((()=>{p(c),x(!1)}),1e3)},children:u?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(i.RefreshCw,{className:"mr-2 h-4 w-4 animate-spin"}),"Finding matches..."]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(i.Image,{className:"mr-2 h-4 w-4"}),"Find similar images"]})})})]})]})})]}),m&&(0,r.jsxs)("div",{className:"space-y-3",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[(0,r.jsx)("h3",{className:"text-lg font-medium",children:"Similar images"}),j.length>0?(0,r.jsxs)("span",{className:"text-sm text-muted-foreground",children:[j.length," matches above ",Math.round(100*a[0]),"% threshold"]}):null]}),u?(0,r.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[1,2,3,4].map((e=>(0,r.jsx)("div",{className:"aspect-square bg-muted animate-pulse rounded-lg"},e)))}):j.length>0?(0,r.jsx)("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-4",children:j.map((e=>(0,r.jsx)(n,{src:e.src,alt:e.title,title:e.title,similarity:e.similarity,onView:()=>console.log("View",e.id),onEdit:()=>console.log("Edit",e.id)},e.id)))}):g.length>0?(0,r.jsxs)("div",{className:"text-center py-12",children:[(0,r.jsx)("h3",{className:"text-lg font-medium mb-2",children:"No matches found above threshold"}),(0,r.jsx)("p",{className:"text-muted-foreground mb-4",children:"Try lowering the similarity threshold to see more results"})]}):null]})]})};const m=function(){return(0,r.jsx)("div",{children:(0,r.jsx)(o,{})})}}}]);