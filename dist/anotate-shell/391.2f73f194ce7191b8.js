"use strict";(self.webpackChunkanotate_shell=self.webpackChunkanotate_shell||[]).push([[391],{391:(e,n,t)=>{t.r(n),t.d(n,{Panel:()=>I,PanelGroup:()=>He,PanelResizeHandle:()=>Be,assert:()=>ue,disableGlobalCursorStyles:()=>k,enableGlobalCursorStyles:()=>M,getIntersectingRectangle:()=>We,getPanelElement:()=>Oe,getPanelElementsForGroup:()=>Te,getPanelGroupElement:()=>ze,getResizeHandleElement:()=>xe,getResizeHandleElementIndex:()=>me,getResizeHandleElementsForGroup:()=>ye,getResizeHandlePanelIds:()=>be,intersects:()=>F,setNonce:()=>A});var r=t(4146);const{createElement:a,createContext:o,createRef:l,forwardRef:i,useCallback:s,useContext:u,useEffect:c,useImperativeHandle:d,useLayoutEffect:f,useMemo:p,useRef:g,useState:h}=r,y=r[`useId${Math.random()}`.slice(0,5)],m=f,v=o(null);v.displayName="PanelGroupContext";const z=m,x="function"==typeof y?y:()=>null;let b=0;function S(e=null){const n=x(),t=g(e||n||null);return null===t.current&&(t.current=""+b++),null!=e?e:t.current}function w({children:e,className:n="",collapsedSize:t,collapsible:r,defaultSize:o,forwardedRef:l,id:i,maxSize:s,minSize:c,onCollapse:f,onExpand:p,onResize:h,order:y,style:m,tagName:x="div",...b}){const w=u(v);if(null===w)throw Error("Panel components must be rendered within a PanelGroup container");const{collapsePanel:I,expandPanel:E,getPanelSize:P,getPanelStyle:A,groupId:C,isPanelCollapsed:L,reevaluatePanelConstraints:D,registerPanel:k,resizePanel:M,unregisterPanel:R}=w,$=S(i),N=g({callbacks:{onCollapse:f,onExpand:p,onResize:h},constraints:{collapsedSize:t,collapsible:r,defaultSize:o,maxSize:s,minSize:c},id:$,idIsFromProps:void 0!==i,order:y});g({didLogMissingDefaultSizeWarning:!1}),z((()=>{const{callbacks:e,constraints:n}=N.current,a={...n};N.current.id=$,N.current.idIsFromProps=void 0!==i,N.current.order=y,e.onCollapse=f,e.onExpand=p,e.onResize=h,n.collapsedSize=t,n.collapsible=r,n.defaultSize=o,n.maxSize=s,n.minSize=c,a.collapsedSize===n.collapsedSize&&a.collapsible===n.collapsible&&a.maxSize===n.maxSize&&a.minSize===n.minSize||D(N.current,a)})),z((()=>{const e=N.current;return k(e),()=>{R(e)}}),[y,$,k,R]),d(l,(()=>({collapse:()=>{I(N.current)},expand:e=>{E(N.current,e)},getId:()=>$,getSize:()=>P(N.current),isCollapsed:()=>L(N.current),isExpanded:()=>!L(N.current),resize:e=>{M(N.current,e)}})),[I,E,P,L,$,M]);const H=A(N.current,o);return a(x,{...b,children:e,className:n,id:i,style:{...H,...m},"data-panel":"","data-panel-collapsible":r||void 0,"data-panel-group-id":C,"data-panel-id":$,"data-panel-size":parseFloat(""+H.flexGrow).toFixed(1)})}const I=i(((e,n)=>a(w,{...e,forwardedRef:n})));let E;function P(){return E}function A(e){E=e}w.displayName="Panel",I.displayName="forwardRef(Panel)";let C=null,L=!0,D=null;function k(){L=!1}function M(){L=!0}function R(e,n){if(!L)return;const t=function(e,n){if(n){const e=0!==(n&K),t=0!==(n&U);if(0!==(n&J))return e?"se-resize":t?"ne-resize":"e-resize";if(0!==(n&V))return e?"sw-resize":t?"nw-resize":"w-resize";if(e)return"s-resize";if(t)return"n-resize"}switch(e){case"horizontal":return"ew-resize";case"intersection":return"move";case"vertical":return"ns-resize"}}(e,n);if(C!==t){if(C=t,null===D){D=document.createElement("style");const e=P();e&&D.setAttribute("nonce",e),document.head.appendChild(D)}D.innerHTML=`*{cursor: ${t}!important;}`}}function $(e){return"keydown"===e.type}function N(e){return e.type.startsWith("pointer")}function H(e){return e.type.startsWith("mouse")}function G(e){if(N(e)){if(e.isPrimary)return{x:e.clientX,y:e.clientY}}else if(H(e))return{x:e.clientX,y:e.clientY};return{x:1/0,y:1/0}}function F(e,n,t){return t?e.x<n.x+n.width&&e.x+e.width>n.x&&e.y<n.y+n.height&&e.y+e.height>n.y:e.x<=n.x+n.width&&e.x+e.width>=n.x&&e.y<=n.y+n.height&&e.y+e.height>=n.y}const B=/\b(?:position|zIndex|opacity|transform|webkitTransform|mixBlendMode|filter|webkitFilter|isolation)\b/;function O(e){const n=getComputedStyle(e);return"fixed"===n.position||(!("auto"===n.zIndex||"static"===n.position&&!function(e){var n;const t=getComputedStyle(null!==(n=q(e))&&void 0!==n?n:e).display;return"flex"===t||"inline-flex"===t}(e))||(+n.opacity<1||("transform"in n&&"none"!==n.transform||("webkitTransform"in n&&"none"!==n.webkitTransform||("mixBlendMode"in n&&"normal"!==n.mixBlendMode||("filter"in n&&"none"!==n.filter||("webkitFilter"in n&&"none"!==n.webkitFilter||("isolation"in n&&"isolate"===n.isolation||(!!B.test(n.willChange)||"touch"===n.webkitOverflowScrolling)))))))))}function T(e){let n=e.length;for(;n--;){const t=e[n];if(ue(t,"Missing node"),O(t))return t}return null}function W(e){return e&&Number(getComputedStyle(e).zIndex)||0}function j(e){const n=[];for(;e;)n.push(e),e=q(e);return n}function q(e){const{parentNode:n}=e;return n&&n instanceof ShadowRoot?n.host:n}const J=1,V=2,K=4,U=8,X="coarse"===function(){if("function"==typeof matchMedia)return matchMedia("(pointer:coarse)").matches?"coarse":"fine"}();let Y=[],_=!1,Q=new Map,Z=new Map;const ee=new Set;function ne(e){const{target:n}=e,{x:t,y:r}=G(e);_=!0,ae({target:n,x:t,y:r}),ie(),Y.length>0&&(se("down",e),e.preventDefault(),e.stopPropagation())}function te(e){const{x:n,y:t}=G(e);if(_&&0===e.buttons&&(_=!1,se("up",e)),!_){const{target:r}=e;ae({target:r,x:n,y:t})}se("move",e),le(),Y.length>0&&e.preventDefault()}function re(e){const{target:n}=e,{x:t,y:r}=G(e);Z.clear(),_=!1,Y.length>0&&e.preventDefault(),se("up",e),ae({target:n,x:t,y:r}),le(),ie()}function ae({target:e,x:n,y:t}){Y.splice(0);let r=null;e instanceof HTMLElement&&(r=e),ee.forEach((e=>{const{element:a,hitAreaMargins:o}=e,l=a.getBoundingClientRect(),{bottom:i,left:s,right:u,top:c}=l,d=X?o.coarse:o.fine;if(n>=s-d&&n<=u+d&&t>=c-d&&t<=i+d){if(null!==r&&a!==r&&!a.contains(r)&&!r.contains(a)&&function(e,n){if(e===n)throw new Error("Cannot compare node with itself");const t={a:j(e),b:j(n)};let r;for(;t.a.at(-1)===t.b.at(-1);)e=t.a.pop(),n=t.b.pop(),r=e;ue(r,"Stacking order can only be calculated for elements with a common ancestor");const a=W(T(t.a)),o=W(T(t.b));if(a===o){const e=r.childNodes,n={a:t.a.at(-1),b:t.b.at(-1)};let a=e.length;for(;a--;){const t=e[a];if(t===n.a)return 1;if(t===n.b)return-1}}return Math.sign(a-o)}(r,a)>0){let e=r,n=!1;for(;e&&!e.contains(a);){if(F(e.getBoundingClientRect(),l,!0)){n=!0;break}e=e.parentElement}if(n)return}Y.push(e)}}))}function oe(e,n){Z.set(e,n)}function le(){let e=!1,n=!1;Y.forEach((t=>{const{direction:r}=t;"horizontal"===r?e=!0:n=!0}));let t=0;Z.forEach((e=>{t|=e})),e&&n?R("intersection",t):e?R("horizontal",t):n?R("vertical",t):null!==D&&(document.head.removeChild(D),C=null,D=null)}function ie(){Q.forEach(((e,n)=>{const{body:t}=n;t.removeEventListener("contextmenu",re),t.removeEventListener("pointerdown",ne),t.removeEventListener("pointerleave",te),t.removeEventListener("pointermove",te)})),window.removeEventListener("pointerup",re),window.removeEventListener("pointercancel",re),ee.size>0&&(_?(Y.length>0&&Q.forEach(((e,n)=>{const{body:t}=n;e>0&&(t.addEventListener("contextmenu",re),t.addEventListener("pointerleave",te),t.addEventListener("pointermove",te))})),window.addEventListener("pointerup",re),window.addEventListener("pointercancel",re)):Q.forEach(((e,n)=>{const{body:t}=n;e>0&&(t.addEventListener("pointerdown",ne,{capture:!0}),t.addEventListener("pointermove",te))})))}function se(e,n){ee.forEach((t=>{const{setResizeHandlerState:r}=t,a=Y.includes(t);r(e,a,n)}))}function ue(e,n){if(!e)throw console.error(n),Error(n)}function ce(e,n,t=10){return e.toFixed(t)===n.toFixed(t)?0:e>n?1:-1}function de(e,n,t=10){return 0===ce(e,n,t)}function fe(e,n,t){return 0===ce(e,n,t)}function pe({panelConstraints:e,panelIndex:n,size:t}){const r=e[n];ue(null!=r,`Panel constraints not found for index ${n}`);let{collapsedSize:a=0,collapsible:o,maxSize:l=100,minSize:i=0}=r;if(ce(t,i)<0)if(o){t=ce(t,(a+i)/2)<0?a:i}else t=i;return t=Math.min(l,t),t=parseFloat(t.toFixed(10))}function ge({delta:e,initialLayout:n,panelConstraints:t,pivotIndices:r,prevLayout:a,trigger:o}){if(fe(e,0))return n;const l=[...n],[i,s]=r;ue(null!=i,"Invalid first pivot index"),ue(null!=s,"Invalid second pivot index");let u=0;if("keyboard"===o){{const r=e<0?s:i,a=t[r];ue(a,`Panel constraints not found for index ${r}`);const{collapsedSize:o=0,collapsible:l,minSize:u=0}=a;if(l){const t=n[r];if(ue(null!=t,`Previous layout not found for panel index ${r}`),fe(t,o)){const n=u-t;ce(n,Math.abs(e))>0&&(e=e<0?0-n:n)}}}{const r=e<0?i:s,a=t[r];ue(a,`No panel constraints found for index ${r}`);const{collapsedSize:o=0,collapsible:l,minSize:u=0}=a;if(l){const t=n[r];if(ue(null!=t,`Previous layout not found for panel index ${r}`),fe(t,u)){const n=t-o;ce(n,Math.abs(e))>0&&(e=e<0?0-n:n)}}}}{const r=e<0?1:-1;let a=e<0?s:i,o=0;for(;;){const e=n[a];ue(null!=e,`Previous layout not found for panel index ${a}`);if(o+=pe({panelConstraints:t,panelIndex:a,size:100})-e,a+=r,a<0||a>=t.length)break}const l=Math.min(Math.abs(e),Math.abs(o));e=e<0?0-l:l}{let r=e<0?i:s;for(;r>=0&&r<t.length;){const a=Math.abs(e)-Math.abs(u),o=n[r];ue(null!=o,`Previous layout not found for panel index ${r}`);const i=pe({panelConstraints:t,panelIndex:r,size:o-a});if(!fe(o,i)&&(u+=o-i,l[r]=i,u.toPrecision(3).localeCompare(Math.abs(e).toPrecision(3),void 0,{numeric:!0})>=0))break;e<0?r--:r++}}if(function(e,n,t){if(e.length!==n.length)return!1;for(let r=0;r<e.length;r++)if(!fe(e[r],n[r],t))return!1;return!0}(a,l))return a;{const r=e<0?s:i,a=n[r];ue(null!=a,`Previous layout not found for panel index ${r}`);const o=a+u,c=pe({panelConstraints:t,panelIndex:r,size:o});if(l[r]=c,!fe(c,o)){let n=o-c;let r=e<0?s:i;for(;r>=0&&r<t.length;){const a=l[r];ue(null!=a,`Previous layout not found for panel index ${r}`);const o=pe({panelConstraints:t,panelIndex:r,size:a+n});if(fe(a,o)||(n-=o-a,l[r]=o),fe(n,0))break;e>0?r--:r++}}}return fe(l.reduce(((e,n)=>n+e),0),100)?l:a}function he({layout:e,panelsArray:n,pivotIndices:t}){let r=0,a=100,o=0,l=0;const i=t[0];ue(null!=i,"No pivot index found"),n.forEach(((e,n)=>{const{constraints:t}=e,{maxSize:s=100,minSize:u=0}=t;n===i?(r=u,a=s):(o+=u,l+=s)}));return{valueMax:Math.min(a,100-o),valueMin:Math.max(r,100-l),valueNow:e[i]}}function ye(e,n=document){return Array.from(n.querySelectorAll(`[data-panel-resize-handle-id][data-panel-group-id="${e}"]`))}function me(e,n,t=document){const r=ye(e,t).findIndex((e=>e.getAttribute("data-panel-resize-handle-id")===n));return null!=r?r:null}function ve(e,n,t){const r=me(e,n,t);return null!=r?[r,r+1]:[-1,-1]}function ze(e,n=document){var t;if(n instanceof HTMLElement&&(null==n||null===(t=n.dataset)||void 0===t?void 0:t.panelGroupId)==e)return n;const r=n.querySelector(`[data-panel-group][data-panel-group-id="${e}"]`);return r||null}function xe(e,n=document){const t=n.querySelector(`[data-panel-resize-handle-id="${e}"]`);return t||null}function be(e,n,t,r=document){var a,o,l,i;const s=xe(n,r),u=ye(e,r),c=s?u.indexOf(s):-1;return[null!==(a=null===(o=t[c])||void 0===o?void 0:o.id)&&void 0!==a?a:null,null!==(l=null===(i=t[c+1])||void 0===i?void 0:i.id)&&void 0!==l?l:null]}function Se(e,n){if(e.length!==n.length)return!1;for(let t=0;t<e.length;t++)if(e[t]!==n[t])return!1;return!0}function we(e,n){const t="horizontal"===e,{x:r,y:a}=G(n);return t?r:a}function Ie(e,n,t,r,a,o){if($(e)){const n="horizontal"===t;let r=0;r=e.shiftKey?100:null!=a?a:10;let o=0;switch(e.key){case"ArrowDown":o=n?0:r;break;case"ArrowLeft":o=n?-r:0;break;case"ArrowRight":o=n?r:0;break;case"ArrowUp":o=n?0:-r;break;case"End":o=100;break;case"Home":o=-100}return o}return null==r?0:function(e,n,t,r,a){const o="horizontal"===t,l=xe(n,a);ue(l,`No resize handle element found for id "${n}"`);const i=l.getAttribute("data-panel-group-id");ue(i,"Resize handle element has no group id attribute");let{initialCursorPosition:s}=r;const u=we(t,e),c=ze(i,a);ue(c,`No group element found for id "${i}"`);const d=c.getBoundingClientRect();return(u-s)/(o?d.width:d.height)*100}(e,n,t,r,o)}function Ee(e,n,t){n.forEach(((n,r)=>{const a=e[r];ue(a,`Panel data not found for index ${r}`);const{callbacks:o,constraints:l,id:i}=a,{collapsedSize:s=0,collapsible:u}=l,c=t[i];if(null==c||n!==c){t[i]=n;const{onCollapse:e,onExpand:r,onResize:a}=o;a&&a(n,c),u&&(e||r)&&(!r||null!=c&&!de(c,s)||de(n,s)||r(),!e||null!=c&&de(c,s)||!de(n,s)||e())}}))}function Pe(e,n){if(e.length!==n.length)return!1;for(let t=0;t<e.length;t++)if(e[t]!=n[t])return!1;return!0}function Ae(e){try{if("undefined"==typeof localStorage)throw new Error("localStorage not supported in this environment");e.getItem=e=>localStorage.getItem(e),e.setItem=(e,n)=>{localStorage.setItem(e,n)}}catch(n){console.error(n),e.getItem=()=>null,e.setItem=()=>{}}}function Ce(e){return`react-resizable-panels:${e}`}function Le(e){return e.map((e=>{const{constraints:n,id:t,idIsFromProps:r,order:a}=e;return r?t:a?`${a}:${JSON.stringify(n)}`:JSON.stringify(n)})).sort(((e,n)=>e.localeCompare(n))).join(",")}function De(e,n){try{const t=Ce(e),r=n.getItem(t);if(r){const e=JSON.parse(r);if("object"==typeof e&&null!=e)return e}}catch(t){}return null}function ke(e,n,t,r,a){var o;const l=Ce(e),i=Le(n),s=null!==(o=De(e,a))&&void 0!==o?o:{};s[i]={expandToSizes:Object.fromEntries(t.entries()),layout:r};try{a.setItem(l,JSON.stringify(s))}catch(u){console.error(u)}}function Me({layout:e,panelConstraints:n}){const t=[...e],r=t.reduce(((e,n)=>e+n),0);if(t.length!==n.length)throw Error(`Invalid ${n.length} panel layout: ${t.map((e=>`${e}%`)).join(", ")}`);if(!fe(r,100)&&t.length>0)for(let o=0;o<n.length;o++){const e=t[o];ue(null!=e,`No layout data found for index ${o}`);const n=100/r*e;t[o]=n}let a=0;for(let o=0;o<n.length;o++){const e=t[o];ue(null!=e,`No layout data found for index ${o}`);const r=pe({panelConstraints:n,panelIndex:o,size:e});e!=r&&(a+=e-r,t[o]=r)}if(!fe(a,0))for(let o=0;o<n.length;o++){const e=t[o];ue(null!=e,`No layout data found for index ${o}`);const r=pe({panelConstraints:n,panelIndex:o,size:e+a});if(e!==r&&(a-=r-e,t[o]=r,fe(a,0)))break}return t}const Re={getItem:e=>(Ae(Re),Re.getItem(e)),setItem:(e,n)=>{Ae(Re),Re.setItem(e,n)}},$e={};function Ne({autoSaveId:e=null,children:n,className:t="",direction:r,forwardedRef:o,id:l=null,onLayout:i=null,keyboardResizeBy:u=null,storage:f=Re,style:y,tagName:m="div",...x}){const b=S(l),w=g(null),[I,E]=h(null),[P,A]=h([]),C=function(){const[e,n]=h(0);return s((()=>n((e=>e+1))),[])}(),L=g({}),D=g(new Map),k=g(0),M=g({autoSaveId:e,direction:r,dragState:I,id:b,keyboardResizeBy:u,onLayout:i,storage:f}),R=g({layout:P,panelDataArray:[],panelDataArrayChanged:!1});g({didLogIdAndOrderWarning:!1,didLogPanelConstraintsWarning:!1,prevPanelIds:[]}),d(o,(()=>({getId:()=>M.current.id,getLayout:()=>{const{layout:e}=R.current;return e},setLayout:e=>{const{onLayout:n}=M.current,{layout:t,panelDataArray:r}=R.current,a=Me({layout:e,panelConstraints:r.map((e=>e.constraints))});Se(t,a)||(A(a),R.current.layout=a,n&&n(a),Ee(r,a,L.current))}})),[]),z((()=>{M.current.autoSaveId=e,M.current.direction=r,M.current.dragState=I,M.current.id=b,M.current.onLayout=i,M.current.storage=f})),function({committedValuesRef:e,eagerValuesRef:n,groupId:t,layout:r,panelDataArray:a,panelGroupElement:o,setLayout:l}){g({didWarnAboutMissingResizeHandle:!1}),z((()=>{if(!o)return;const e=ye(t,o);for(let n=0;n<a.length-1;n++){const{valueMax:t,valueMin:o,valueNow:l}=he({layout:r,panelsArray:a,pivotIndices:[n,n+1]}),i=e[n];if(null==i);else{const e=a[n];ue(e,`No panel data found for index "${n}"`),i.setAttribute("aria-controls",e.id),i.setAttribute("aria-valuemax",""+Math.round(t)),i.setAttribute("aria-valuemin",""+Math.round(o)),i.setAttribute("aria-valuenow",null!=l?""+Math.round(l):"")}}return()=>{e.forEach(((e,n)=>{e.removeAttribute("aria-controls"),e.removeAttribute("aria-valuemax"),e.removeAttribute("aria-valuemin"),e.removeAttribute("aria-valuenow")}))}}),[t,r,a,o]),c((()=>{if(!o)return;const e=n.current;ue(e,"Eager values not found");const{panelDataArray:a}=e;ue(null!=ze(t,o),`No group found for id "${t}"`);const i=ye(t,o);ue(i,`No resize handles found for group id "${t}"`);const s=i.map((e=>{const n=e.getAttribute("data-panel-resize-handle-id");ue(n,"Resize handle element has no handle id attribute");const[i,s]=be(t,n,a,o);if(null==i||null==s)return()=>{};const u=e=>{if(!e.defaultPrevented)switch(e.key){case"Enter":{e.preventDefault();const s=a.findIndex((e=>e.id===i));if(s>=0){const e=a[s];ue(e,`No panel data found for index ${s}`);const i=r[s],{collapsedSize:u=0,collapsible:c,minSize:d=0}=e.constraints;if(null!=i&&c){const e=ge({delta:fe(i,u)?d-u:u-i,initialLayout:r,panelConstraints:a.map((e=>e.constraints)),pivotIndices:ve(t,n,o),prevLayout:r,trigger:"keyboard"});r!==e&&l(e)}}break}}};return e.addEventListener("keydown",u),()=>{e.removeEventListener("keydown",u)}}));return()=>{s.forEach((e=>e()))}}),[o,e,n,t,r,a,l])}({committedValuesRef:M,eagerValuesRef:R,groupId:b,layout:P,panelDataArray:R.current.panelDataArray,setLayout:A,panelGroupElement:w.current}),c((()=>{const{panelDataArray:n}=R.current;if(e){if(0===P.length||P.length!==n.length)return;let t=$e[e];null==t&&(t=function(e,n=10){let t=null;return(...r)=>{null!==t&&clearTimeout(t),t=setTimeout((()=>{e(...r)}),n)}}(ke,100),$e[e]=t);const r=[...n],a=new Map(D.current);t(e,r,a,P,f)}}),[e,P,f]),c((()=>{}));const G=s((e=>{const{onLayout:n}=M.current,{layout:t,panelDataArray:r}=R.current;if(e.constraints.collapsible){const a=r.map((e=>e.constraints)),{collapsedSize:o=0,panelSize:l,pivotIndices:i}=Fe(r,e,t);if(ue(null!=l,`Panel size not found for panel "${e.id}"`),!de(l,o)){D.current.set(e.id,l);const s=ge({delta:Ge(r,e)===r.length-1?l-o:o-l,initialLayout:t,panelConstraints:a,pivotIndices:i,prevLayout:t,trigger:"imperative-api"});Pe(t,s)||(A(s),R.current.layout=s,n&&n(s),Ee(r,s,L.current))}}}),[]),F=s(((e,n)=>{const{onLayout:t}=M.current,{layout:r,panelDataArray:a}=R.current;if(e.constraints.collapsible){const o=a.map((e=>e.constraints)),{collapsedSize:l=0,panelSize:i=0,minSize:s=0,pivotIndices:u}=Fe(a,e,r),c=null!=n?n:s;if(de(i,l)){const n=D.current.get(e.id),l=null!=n&&n>=c?n:c,s=ge({delta:Ge(a,e)===a.length-1?i-l:l-i,initialLayout:r,panelConstraints:o,pivotIndices:u,prevLayout:r,trigger:"imperative-api"});Pe(r,s)||(A(s),R.current.layout=s,t&&t(s),Ee(a,s,L.current))}}}),[]),B=s((e=>{const{layout:n,panelDataArray:t}=R.current,{panelSize:r}=Fe(t,e,n);return ue(null!=r,`Panel size not found for panel "${e.id}"`),r}),[]),O=s(((e,n)=>{const{panelDataArray:t}=R.current,r=Ge(t,e);return function({defaultSize:e,dragState:n,layout:t,panelData:r,panelIndex:a,precision:o=3}){const l=t[a];let i;return i=null==l?null!=e?e.toPrecision(o):"1":1===r.length?"1":l.toPrecision(o),{flexBasis:0,flexGrow:i,flexShrink:1,overflow:"hidden",pointerEvents:null!==n?"none":void 0}}({defaultSize:n,dragState:I,layout:P,panelData:t,panelIndex:r})}),[I,P]),T=s((e=>{const{layout:n,panelDataArray:t}=R.current,{collapsedSize:r=0,collapsible:a,panelSize:o}=Fe(t,e,n);return ue(null!=o,`Panel size not found for panel "${e.id}"`),!0===a&&de(o,r)}),[]),W=s((e=>{const{layout:n,panelDataArray:t}=R.current,{collapsedSize:r=0,collapsible:a,panelSize:o}=Fe(t,e,n);return ue(null!=o,`Panel size not found for panel "${e.id}"`),!a||ce(o,r)>0}),[]),j=s((e=>{const{panelDataArray:n}=R.current;n.push(e),n.sort(((e,n)=>{const t=e.order,r=n.order;return null==t&&null==r?0:null==t?-1:null==r?1:t-r})),R.current.panelDataArrayChanged=!0,C()}),[C]);z((()=>{if(R.current.panelDataArrayChanged){R.current.panelDataArrayChanged=!1;const{autoSaveId:e,onLayout:n,storage:t}=M.current,{layout:r,panelDataArray:a}=R.current;let o=null;if(e){const n=function(e,n,t){var r,a;return null!==(a=(null!==(r=De(e,t))&&void 0!==r?r:{})[Le(n)])&&void 0!==a?a:null}(e,a,t);n&&(D.current=new Map(Object.entries(n.expandToSizes)),o=n.layout)}null==o&&(o=function({panelDataArray:e}){const n=Array(e.length),t=e.map((e=>e.constraints));let r=0,a=100;for(let o=0;o<e.length;o++){const e=t[o];ue(e,`Panel constraints not found for index ${o}`);const{defaultSize:l}=e;null!=l&&(r++,n[o]=l,a-=l)}for(let o=0;o<e.length;o++){const l=t[o];ue(l,`Panel constraints not found for index ${o}`);const{defaultSize:i}=l;if(null!=i)continue;const s=a/(e.length-r);r++,n[o]=s,a-=s}return n}({panelDataArray:a}));const l=Me({layout:o,panelConstraints:a.map((e=>e.constraints))});Se(r,l)||(A(l),R.current.layout=l,n&&n(l),Ee(a,l,L.current))}})),z((()=>{const e=R.current;return()=>{e.layout=[]}}),[]);const q=s((e=>function(n){n.preventDefault();const t=w.current;if(!t)return()=>null;const{direction:r,dragState:a,id:o,keyboardResizeBy:l,onLayout:i}=M.current,{layout:s,panelDataArray:u}=R.current,{initialLayout:c}=null!=a?a:{},d=ve(o,e,t);let f=Ie(n,e,r,a,l,t);const p="horizontal"===r;"rtl"===document.dir&&p&&(f=-f);const g=ge({delta:f,initialLayout:null!=c?c:s,panelConstraints:u.map((e=>e.constraints)),pivotIndices:d,prevLayout:s,trigger:$(n)?"keyboard":"mouse-or-touch"}),h=!Pe(s,g);(N(n)||H(n))&&k.current!=f&&(k.current=f,oe(e,h||0===f?0:p?f<0?J:V:f<0?K:U)),h&&(A(g),R.current.layout=g,i&&i(g),Ee(u,g,L.current))}),[]),X=s(((e,n)=>{const{onLayout:t}=M.current,{layout:r,panelDataArray:a}=R.current,o=a.map((e=>e.constraints)),{panelSize:l,pivotIndices:i}=Fe(a,e,r);ue(null!=l,`Panel size not found for panel "${e.id}"`);const s=ge({delta:Ge(a,e)===a.length-1?l-n:n-l,initialLayout:r,panelConstraints:o,pivotIndices:i,prevLayout:r,trigger:"imperative-api"});Pe(r,s)||(A(s),R.current.layout=s,t&&t(s),Ee(a,s,L.current))}),[]),Y=s(((e,n)=>{const{layout:t,panelDataArray:r}=R.current,{collapsedSize:a=0,collapsible:o}=n,{collapsedSize:l=0,collapsible:i,maxSize:s=100,minSize:u=0}=e.constraints,{panelSize:c}=Fe(r,e,t);null!=c&&(o&&i&&de(c,a)?de(a,l)||X(e,l):c<u?X(e,u):c>s&&X(e,s))}),[X]),_=s(((e,n)=>{const{direction:t}=M.current,{layout:r}=R.current;if(!w.current)return;const a=xe(e,w.current);ue(a,`Drag handle element not found for id "${e}"`);const o=we(t,n);E({dragHandleId:e,dragHandleRect:a.getBoundingClientRect(),initialCursorPosition:o,initialLayout:r})}),[]),Q=s((()=>{E(null)}),[]),Z=s((e=>{const{panelDataArray:n}=R.current,t=Ge(n,e);t>=0&&(n.splice(t,1),delete L.current[e.id],R.current.panelDataArrayChanged=!0,C())}),[C]),ee=p((()=>({collapsePanel:G,direction:r,dragState:I,expandPanel:F,getPanelSize:B,getPanelStyle:O,groupId:b,isPanelCollapsed:T,isPanelExpanded:W,reevaluatePanelConstraints:Y,registerPanel:j,registerResizeHandle:q,resizePanel:X,startDragging:_,stopDragging:Q,unregisterPanel:Z,panelGroupElement:w.current})),[G,I,r,F,B,O,b,T,W,Y,j,q,X,_,Q,Z]),ne={display:"flex",flexDirection:"horizontal"===r?"row":"column",height:"100%",overflow:"hidden",width:"100%"};return a(v.Provider,{value:ee},a(m,{...x,children:n,className:t,id:l,ref:w,style:{...ne,...y},"data-panel-group":"","data-panel-group-direction":r,"data-panel-group-id":b}))}const He=i(((e,n)=>a(Ne,{...e,forwardedRef:n})));function Ge(e,n){return e.findIndex((e=>e===n||e.id===n.id))}function Fe(e,n,t){const r=Ge(e,n),a=r===e.length-1?[r-1,r]:[r,r+1],o=t[r];return{...n.constraints,panelSize:o,pivotIndices:a}}function Be({children:e=null,className:n="",disabled:t=!1,hitAreaMargins:r,id:o,onBlur:l,onDragging:i,onFocus:s,style:d={},tabIndex:f=0,tagName:p="div",...y}){var m,x;const b=g(null),w=g({onDragging:i});c((()=>{w.current.onDragging=i}));const I=u(v);if(null===I)throw Error("PanelResizeHandle components must be rendered within a PanelGroup container");const{direction:E,groupId:P,registerResizeHandle:A,startDragging:C,stopDragging:L,panelGroupElement:D}=I,k=S(o),[M,R]=h("inactive"),[$,N]=h(!1),[H,G]=h(null),F=g({state:M});z((()=>{F.current.state=M})),c((()=>{if(t)G(null);else{const e=A(k);G((()=>e))}}),[t,k,A]);const B=null!==(m=null==r?void 0:r.coarse)&&void 0!==m?m:15,O=null!==(x=null==r?void 0:r.fine)&&void 0!==x?x:5;c((()=>{if(t||null==H)return;const e=b.current;ue(e,"Element ref not attached");return function(e,n,t,r,a){var o;const{ownerDocument:l}=n,i={direction:t,element:n,hitAreaMargins:r,setResizeHandlerState:a},s=null!==(o=Q.get(l))&&void 0!==o?o:0;return Q.set(l,s+1),ee.add(i),ie(),function(){var n;Z.delete(e),ee.delete(i);const t=null!==(n=Q.get(l))&&void 0!==n?n:1;if(Q.set(l,t-1),ie(),1===t&&Q.delete(l),Y.includes(i)){const e=Y.indexOf(i);e>=0&&Y.splice(e,1),le(),a("up",!0,null)}}}(k,e,E,{coarse:B,fine:O},((e,n,t)=>{if(n)switch(e){case"down":{R("drag"),ue(t,'Expected event to be defined for "down" action'),C(k,t);const{onDragging:e}=w.current;e&&e(!0);break}case"move":{const{state:e}=F.current;"drag"!==e&&R("hover"),ue(t,'Expected event to be defined for "move" action'),H(t);break}case"up":{R("hover"),L();const{onDragging:e}=w.current;e&&e(!1);break}}else R("inactive")}))}),[B,E,t,O,A,k,H,C,L]),function({disabled:e,handleId:n,resizeHandler:t,panelGroupElement:r}){c((()=>{if(e||null==t||null==r)return;const a=xe(n,r);if(null==a)return;const o=e=>{if(!e.defaultPrevented)switch(e.key){case"ArrowDown":case"ArrowLeft":case"ArrowRight":case"ArrowUp":case"End":case"Home":e.preventDefault(),t(e);break;case"F6":{e.preventDefault();const t=a.getAttribute("data-panel-group-id");ue(t,`No group element found for id "${t}"`);const o=ye(t,r),l=me(t,n,r);ue(null!==l,`No resize element found for id "${n}"`),o[e.shiftKey?l>0?l-1:o.length-1:l+1<o.length?l+1:0].focus();break}}};return a.addEventListener("keydown",o),()=>{a.removeEventListener("keydown",o)}}),[r,e,n,t])}({disabled:t,handleId:k,resizeHandler:H,panelGroupElement:D});return a(p,{...y,children:e,className:n,id:o,onBlur:()=>{N(!1),null==l||l()},onFocus:()=>{N(!0),null==s||s()},ref:b,role:"separator",style:{touchAction:"none",userSelect:"none",...d},tabIndex:f,"data-panel-group-direction":E,"data-panel-group-id":P,"data-resize-handle":"","data-resize-handle-active":"drag"===M?"pointer":$?"keyboard":void 0,"data-resize-handle-state":M,"data-panel-resize-handle-enabled":!t,"data-panel-resize-handle-id":k})}function Oe(e,n=document){const t=n.querySelector(`[data-panel-id="${e}"]`);return t||null}function Te(e,n=document){return Array.from(n.querySelectorAll(`[data-panel][data-panel-group-id="${e}"]`))}function We(e,n,t){return F(e,n,t)?{x:Math.max(e.x,n.x),y:Math.max(e.y,n.y),width:Math.min(e.x+e.width,n.x+n.width)-Math.max(e.x,n.x),height:Math.min(e.y+e.height,n.y+n.height)-Math.max(e.y,n.y)}:{x:0,y:0,width:0,height:0}}Ne.displayName="PanelGroup",He.displayName="forwardRef(PanelGroup)",Be.displayName="PanelResizeHandle"}}]);